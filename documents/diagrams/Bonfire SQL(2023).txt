CREATE TABLE Usuario(
	nome varchar(30),
  	apelido varchar(30),
  	email varchar,
  	senha varchar,
  	biografia varchar(200),
  	genero varchar(30),
  	verificado boolean,
  	recado varchar(50),
  	CONSTRAINT PK_usuario PRIMARY KEY(nome, apelido)
);

CREATE TABLE Comunidade(
  	idComunidade varchar(30),
    nome varchar(30),
  	biografia varchar(200),
  	recado varchar(50),
  	verificado boolean,
  	privada boolean,
  	CONSTRAINT PK_comunidade PRIMARY KEY(idComunidade)
);

CREATE TABLE Campeonato(
    idCamp varchar(30),
	nome varchar(100),
  	dtInicio date,
  	dtEncerramento date,
  	recado varchar(50),
  	biografia varchar(200),
  	categoria varchar(30),
  	presencial boolean,
  	premiacao numeric,
    CONSTRAINT PK_campeonato PRIMARY KEY(idCamp)
);

CREATE TABLE Jogo(
    idJogo varchar(30),
	genero varchar(30),
  	desenvolvedora varchar(100),
  	plataforma varchar(30),
  	multiplayer boolean,
  	CONSTRAINT PK_jogo PRIMARY KEY(idJogo)
);

CREATE TABLE Publicacao(
  	idPublicacao varchar(30),
  	dtComentario date,
    tags varchar(30),
    texto varchar(300),
  	usuarioNome varchar(30),
    usuarioApelido varchar(30),
  	CONSTRAINT PK_publicacao PRIMARY KEY(idPublicacao),
    CONSTRAINT FK_usuarionome_publicacao FOREIGN KEY(usuarioNome) REFERENCES Usuario(nome),
    CONSTRAINT FK_usuarioapelido_publicacao FOREIGN KEY(usuarioApelido) REFERENCES Usuario(apelido)
);

CREATE TABLE Comentario(
	idComentario varchar(30),
  	tags varchar(30),
  	dtComentario date,
  	texto varchar(300),
  	usuarioNome varchar(30),
    usuarioApelido varchar(30),
    idPublicacao varchar(30),
  	CONSTRAINT PK_comentario PRIMARY KEY(idComentario),
  	CONSTRAINT FK_usuarionome_comentario FOREIGN KEY(usuarioNome) REFERENCES Usuario(nome),
    CONSTRAINT FK_usuarioapelido_comentario FOREIGN KEY(usuarioApelido) REFERENCES Usuario(apelido),
  	CONSTRAINT FK_publicacao_comentario FOREIGN KEY(idPublicacao) REFERENCES Publicacao(idPublicacao)
);

CREATE TABLE ComunidadeCampeonato(
	idComunidade varchar(30),
  	idCamp varchar(30),
  	CONSTRAINT FK_ComunidadeCampeonato PRIMARY KEY(idComunidade, idCamp),
  	FOREIGN KEY(idComunidade) REFERENCES Comunidade(idComunidade),
    FOREIGN KEY(idCamp) REFERENCES Campeonato(idCamp)
);

CREATE TABLE ComunidadeJogo(
	idComunidade varchar(30),
  	idJogo varchar(30),
  	CONSTRAINT FK_ComunidadeJogo PRIMARY KEY(idComunidade, idJogo),
  	FOREIGN KEY(idComunidade) REFERENCES Comunidade(idComunidade),
  	FOREIGN KEY(idJogo) REFERENCES Jogo(idJogo)
);

CREATE TABLE UsuarioJogo(
	nomeUsuario varchar(30),
  	apelidoUsuario varchar(30),
  	idJogo varchar(30),
  	CONSTRAINT FK_UsuarioJogo PRIMARY KEY(nomeUsuario, apelidoUsuario, idJogo),
  	FOREIGN KEY(nomeUsuario) REFERENCES Usuario(nome),
    FOREIGN KEY(apelidoUsuario) REFERENCES Usuario(apelido),
  	FOREIGN KEY(idJogo) REFERENCES Jogo(idJogo)
);

CREATE TABLE UsuarioComunidade(
	nomeUsuario varchar(30),
  	apelidoUsuario varchar(30),
  	idComunidade varchar(30),
  	CONSTRAINT FK_UsuarioComunidade PRIMARY KEY(nomeUsuario, apelidoUsuario, idComunidade),
  	FOREIGN KEY(nomeUsuario) REFERENCES Usuario(nome),
    FOREIGN KEY(apelidoUsuario) REFERENCES Usuario(apelido),
  	FOREIGN KEY(idComunidade) REFERENCES Comunidade(idComunidade)
);

CREATE TABLE UsuarioCampeonato(
	nomeUsuario varchar(30),
  	apelidoUsuario varchar(30),
  	idCampeonato varchar(30),
  	CONSTRAINT FK_UsuarioCampeonato PRIMARY KEY(nomeUsuario, apelidoUsuario, idCampeonato),
  	FOREIGN KEY(nomeUsuario) REFERENCES Usuario(nome),
    FOREIGN KEY(apelidoUsuario) REFERENCES Usuario(apelido),
  	FOREIGN KEY(idCampeonato) REFERENCES Campeonato(idCampeonato)
);

CREATE TABLE CampeonatoJogo(
	idJogo varchar(30),
  	idCamp varchar(30),
  	CONSTRAINT PK_CampeonatoJogo PRIMARY KEY(idJogo, idCamp),
  	FOREIGN KEY(idJogo) REFERENCES Jogo(idJogo),
    FOREIGN KEY(idCamp) REFERENCES Campeonato(idCamp)
);